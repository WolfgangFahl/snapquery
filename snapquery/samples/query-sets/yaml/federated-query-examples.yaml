domain: bitplan.com
namespace: federated-queries
target_graph_name: wikidata
queries:
- name: ATMs around Munich belonging to the Bankcard-Servicenetz interbank network
    (federated query)
  namespace: federated-queries
  domain: bitplan.com
  query_id: atms-around-munich-belonging-to-the-bankcard-servicenetz-interbank-network-federated-query--federated-queries@bitplan.com
  sparql: |
    #defaultView:Map{"hide":["?atm","?geometry"], "layer": "?bankLabel"}
    PREFIX bif: <bif:>
    SELECT ?atm ?geometry ?bank ?bankLabel WHERE {
      hint:Query hint:optimizer "None".

      SERVICE <http://linkedgeodata.org/sparql> {
        { ?atm a lgdo:Bank; lgdo:atm true. }
        UNION { ?atm a lgdo:Atm. }

        ?atm geom:geometry [geo:asWKT ?geometry];
             lgdo:operator ?operator.
        FILTER(bif:st_intersects(?geometry, bif:st_point(11.5746898, 48.1479876), 5)) # 5 km around Munich
      }

      BIND(STRLANG(?operator, "de") as ?bankLabel)
      ?bank rdfs:label ?bankLabel.

      # bank is part of the Bankcard service network, either via an explicit statement or implicitly due to its legal form (unless explicitly excluded)
      { ?bank wdt:P527 wd:Q806724. }
      UNION { ?bank wdt:P1454 wd:Q5349747. }
      MINUS { wd:Q806724 wdt:P3113 ?bank. }
    }
  url: https://www.wikidata.org/wiki/Wikidata:SPARQL_query_service/queries/examples#ATMs_around_Munich_belonging_to_the_Bankcard-Servicenetz_interbank_network_(federated_query)
  title: ATMs around Munich belonging to the Bankcard-Servicenetz interbank network
    (federated query)
  description: ''
- name: Metabolite-metabolite interactions (mostly conversions) and their pKa change
    (federated query)
  namespace: federated-queries
  domain: bitplan.com
  query_id: metabolite-metabolite-interactions-mostly-conversions-and-their-pka-change-federated-query--federated-queries@bitplan.com
  sparql: |-
    #defaultView:Dimensions
    SELECT DISTINCT ?wpid ?metaboliteLabel ?pKa ?pKa2 ?metabolite2Label ?wpid2
    WITH {
      SELECT ?wpid ?source_pathway ?metabolite ?pKa ?pKa2 ?metabolite2 ?wpid2
      WHERE {
        # VALUES ?wpid { "WP550" }
        ?pathway wdt:P2410 ?wpid ;
                 wdt:P527 ?metabolite ;
                 wdt:P2888 ?source_pathway .
        ?metabolite wdt:P1117 ?pKa .

        SERVICE <http://sparql.wikipathways.org/sparql> {
          ?wp_mb1 wp:bdbWikidata ?metabolite .
          ?wp_mb1 dcterms:isPartOf ?interaction .
          ?interaction rdf:type wp:Interaction .
          ?wp_mb2 dct:isPartOf ?interaction .
          ?wp_mb2 wp:bdbWikidata ?metabolite2 .
          FILTER (?wp_mb1 != ?wp_mb2)
        }
      }
    } AS %result
    WHERE {
      INCLUDE %result
      ?metabolite2 wdt:P1117 ?pKa2 .
      ?pathway2 wdt:P2410 ?wpid2 ;
                 wdt:P527 ?metabolite2 ;
      SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }
    }
  url: https://www.wikidata.org/wiki/Wikidata:SPARQL_query_service/queries/examples#Metabolite-metabolite_interactions_(mostly_conversions)_and_their_pKa_change_(federated_query)
  title: Metabolite-metabolite interactions (mostly conversions) and their pKa change
    (federated query)
  description: Federated query using the WikiPathways SPARQL endpoint to retrieve
    interaction information. The dimensions plot show the pKa changes during metabolite-metabolite
    interaction. It must be noted here that many very basic or very acidic are reported
    in pathways as the uncharged structure, whereas in normal biological pathways
    these compounds are charged and then have quite different pKa charges.
- name: Biomarkers in Wikidata which interact with proteins in human pathways from
    Wikipathways
  namespace: federated-queries
  domain: bitplan.com
  query_id: biomarkers-in-wikidata-which-interact-with-proteins-in-human-pathways-from-wikipathways--federated-queries@bitplan.com
  sparql: |-
    SELECT DISTINCT ?biomarkerLabel ?proteinLabel ?geneID ?WP_gene ?PathwayID ?PathwayName #results that are displayed.
    WHERE {
      VALUES ?biomarker {wd:Q420633 wd:Q27125809 wd:Q422462} #you can add more biomarkers here if needed, separated by a space.
      ?biomarker wdt:P31 wd:Q11173. #Stating that all biomarkers have to be "instance of" "chemical compound" (you could ommit this, but query will probably take longer).
      ?biomarker wdt:P638 ?pdbID . #Checking if a biomarker has a Protein Databank ID (PDB) -> meaning the metabolite can interact with a protein.
      ?protein wdt:P31 wd:Q8054 . #Stating that all proteins are "instance of" "protein"
      ?protein wdt:P638 ?pdbID . #Checking which proteins have a PDB ID, which we queried previously in relationship to the biomarkers.
      ?protein wdt:P702 ?gene . #Connecting the protein to a gene ("encoded by" relationship) -> to get an identifier we can use later in federated WikiPathways query.
      ?gene wdt:P703 wd:Q15978631 . #Now removing all genes that are not found in species "Homo sapiens". -> This info is not always available for proteins in WikiData.
      ?gene wdt:P2888 ?geneID . #Getting the "exact match" identifier for the gene, related to the protein, related to the biomarker.

      ##The IRI from Wikidata starts with http:// , where the one from WikiPathways starts with https:// , so we need to rewrite the IRI
        BIND(                      # Bind the created IRI into a new variable (called ?newIRI)
            IRI(                   # Convert the string back to an IRI
              CONCAT(              # Concatenate item 1 and 2 together as one string
                   "https",        # First item to concat (more items can be added with a comma
                  #Second item to concat:
                   SUBSTR(         # Obtain a substring
                     STR(?geneID), # Convert the geneID IRI from Wikidata to a string,
                     5)            # removing the first 5 characters (<http)
            )) AS ?newIRI          # Name for the new variable
        )

      SERVICE <http://sparql.wikipathways.org/sparql> { #Connecting to the WikiPathways SPARQL endpoint.
         ?WP_pathway a wp:Pathway . #Stating a ?WP_pathway is indeed a pathway in the WikiPathways RDF .
         ?WP_pathway wp:organismName "Homo sapiens" . #Removing all PWs not for species Homo sapiens.
         ?WP_pathway dc:identifier ?PathwayID . #Query the identifier of the pathway in WPs.
         ?WP_pathway dc:title ?PathwayName . #Obtaining the name of the pathway.

         ?WP_gene a wp:Protein . #Stating that a ?WP_gene is a Protein DataNode (you could ommit this, to also get all DataNodes modeled as GeneProducts out, but query will take longer).
         ?WP_gene wp:bdbEntrezGene ?newIRI . #Connecting the previously queried "exact match" from WikiData to the NCBI/Entrez Gene ID in WPs.
         ?WP_gene dct:isPartOf ?WP_pathway . #Connecting the WP_gene to the WP_pathway.

       }
     OPTIONAL {?biomarker rdfs:label ?biomarkerLabel. #Create a label (aka name) for the biomarkers in WikiData, without using the service query.
    FILTER(LANG(?biomarkerLabel) = "en").
    }
       OPTIONAL {?protein rdfs:label ?proteinLabel. #Create a label(aka name) for the proteins in WikiData, without using the service query.
    FILTER(LANG(?proteinLabel) = "en").
    }

    }
    ORDER BY DESC (?biomarkerLabel) #Order results for biomarkers
  url: https://www.wikidata.org/wiki/Wikidata:SPARQL_query_service/queries/examples#Biomarkers_in_Wikidata_which_interact_with_proteins_in_human_pathways_from_Wikipathways
  title: Biomarkers in Wikidata which interact with proteins in human pathways from
    Wikipathways
  description: ''
- name: Known interaction types in Wikipathways for a pathway with Identifier WP716
    (federated query)
  namespace: federated-queries
  domain: bitplan.com
  query_id: known-interaction-types-in-wikipathways-for-a-pathway-with-identifier-wp716-federated-query--federated-queries@bitplan.com
  sparql: |-
    SELECT DISTINCT ?interaction_type WHERE {
      VALUES ?wpid {"WP716"}
      ?item wdt:P2410 ?wpid ;
            wdt:P2888 ?source_pathway .

      SERVICE <http://sparql.wikipathways.org/sparql> {
         ?wp_pathway dc:identifier ?source_pathway .
         ?s dct:isPartOf ?wp_pathway, ?interaction .
         ?interaction rdf:type wp:Interaction .
         ?interaction rdf:type ?interaction_type .
         ?interaction wp:participants ?participants .
      }
    }
  url: https://www.wikidata.org/wiki/Wikidata:SPARQL_query_service/queries/examples#Known_interaction_types_in_Wikipathways_for_a_pathway_with_Identifier_WP716_(federated_query)
  title: Known interaction types in Wikipathways for a pathway with Identifier WP716
    (federated query)
  description: ''
- name: Local annotations from Wikipathways using Federated query on a Pathway with
    identifier WP716 (federated query)
  namespace: federated-queries
  domain: bitplan.com
  query_id: local-annotations-from-wikipathways-using-federated-query-on-a-pathway-with-identifier-wp716-federated-query--federated-queries@bitplan.com
  sparql: |
    SELECT DISTINCT ?item ?pw_annotation WHERE {
      VALUES ?wpid {"WP716"}
      ?item wdt:P2410 ?wpid ;
            wdt:P2888 ?source_pathway .

      SERVICE <http://sparql.wikipathways.org/sparql> {
         ?wp_pathway dc:identifier ?source_pathway .
         ?wp_pathway wp:ontologyTag ?pw_annotation .
         # ?pw_annotation rdfs:label ?annotation_label .
       }
    }
  url: https://www.wikidata.org/wiki/Wikidata:SPARQL_query_service/queries/examples#Local_annotations_from_Wikipathways_using_Federated_query_on_a_Pathway_with_identifier_WP716_(federated_query)
  title: Local annotations from Wikipathways using Federated query on a Pathway with
    identifier WP716 (federated query)
  description: ''
- name: Universities ranked by PageRank on English Wikipedia (federated query)
  namespace: federated-queries
  domain: bitplan.com
  query_id: universities-ranked-by-pagerank-on-english-wikipedia-federated-query--federated-queries@bitplan.com
  sparql: |-
    SELECT DISTINCT ?uni ?uniLabel ?pr WHERE {
      ?uni wdt:P31/wdt:P279* wd:Q3918.
      SERVICE <http://dbpedia.org/sparql> {
        ?uni vrank:hasRank/vrank:rankValue ?pr
      }
      SERVICE wikibase:label {
        bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en".
      }
    } ORDER BY DESC(?pr) LIMIT 50
  url: https://www.wikidata.org/wiki/Wikidata:SPARQL_query_service/queries/examples#Universities_ranked_by_PageRank_on_English_Wikipedia_(federated_query)
  title: Universities ranked by PageRank on English Wikipedia (federated query)
  description: ''
- name: Editors of the WOP 2014
  namespace: federated-queries
  domain: bitplan.com
  query_id: editors-of-the-wop-2014--federated-queries@bitplan.com
  sparql: |-
    # Editors of the WOP 2014
    SELECT DISTINCT ?editor ?editorName
    WHERE {
      SERVICE <https://qlever.cs.uni-freiburg.de/api/wikidata> {
        wd:Q113544723 wdt:P179 ?editor.
        ?editor schema:name ?editorName.
      }
    }
  url: https://www.wikidata.org/wiki/Wikidata:SPARQL_query_service/queries/examples
  title: Editors of the WOP 2014
  description: ''
- name: Birth place of all persons with a Wikidata link (using SERVICE)
  namespace: federated-queries
  domain: bitplan.com
  query_id: birth-place-of-all-persons-with-a-wikidata-link-using-service--federated-queries@bitplan.com
  sparql: "SELECT ?person_name ?person_wikidata_id ?place_of_birth (COUNT(DISTINCT\
    \ ?paper_title) AS ?count) ?coordinates WHERE {\n  ?person_dblp rdf:type dblp:Person\
    \ .\n  ?person_dblp dblp:wikidata ?person_wikidata_id .\n  ?person_dblp ^dblp:authoredBy/dblp:title\
    \ ?paper_title .\n  ?person_dblp rdfs:label ?person_name .\n  ?text ql:contains-entity\
    \ ?paper_title .\n  ?text ql:contains-word \"graph algo*\" .\n  SERVICE <https://qlever.cs.uni-freiburg.de/api/wikidata>\
    \ {\n    SELECT ?person_wikidata_id ?place_of_birth ?coordinates {\n\t  ?person_wikidata_id\
    \ wdt:P2456 ?person_dblp_id .\n\t  ?person_wikidata_id wdt:P19 ?place_of_birth_id\
    \ .\n\t  ?place_of_birth_id @en@rdfs:label ?place_of_birth .\n      ?place_of_birth_id\
    \ wdt:P625 ?coordinates\n\t}\n  }\n}\nGROUP BY ?person_name ?person_wikidata_id\
    \ ?place_of_birth ?coordinates\nORDER BY DESC(?count)"
  url: ''
  title: Birth place of all persons with a Wikidata link (using SERVICE)
  description: ''
- name: Birth places for particular venues (using SERVICE)
  namespace: federated-queries
  domain: bitplan.com
  query_id: birth-places-for-particular-venues-using-service--federated-queries@bitplan.com
  sparql: |-
    SELECT ?person_name ?person_wikidata_id ?place_of_birth (COUNT(DISTINCT ?paper) AS ?count) ?coordinates WHERE {
      ?person_dblp rdf:type dblp:Person .
      ?person_dblp dblp:wikidata ?person_wikidata_id .
      ?person_dblp ^dblp:authoredBy ?paper .
      ?paper dblp:publishedIn ?venue .
      ?person_dblp rdfs:label ?person_name .
      FILTER REGEX(?venue, "SIGIR|CIKM|ECIR")
      SERVICE <https://qlever.cs.uni-freiburg.de/api/wikidata> {
        SELECT ?person_wikidata_id ?place_of_birth ?coordinates {
          ?person_wikidata_id wdt:P2456 ?person_dblp_id .
          ?person_wikidata_id wdt:P19 ?place_of_birth_id .
          ?place_of_birth_id @en@rdfs:label ?place_of_birth .
          ?place_of_birth_id wdt:P625 ?coordinates
        }
      }
    }
    GROUP BY ?person_name ?person_wikidata_id ?place_of_birth ?coordinates
    HAVING (?count > 10)
    ORDER BY DESC(?count)
  url: ''
  title: Birth places for particular venues (using SERVICE)
  description: ''
- name: Affiliations by conference (using SERVICE)
  namespace: federated-queries
  domain: bitplan.com
  query_id: affiliations-by-conference-using-service--federated-queries@bitplan.com
  sparql: |-
    SELECT ?affiliation (COUNT(?venue) AS ?count) (GROUP_CONCAT(DISTINCT ?person_name) AS ?people) ?coordinates WHERE {
      ?person_dblp rdf:type dblp:Person .
      ?person_dblp dblp:wikidata ?person_wikidata_id .
      ?person_dblp ^dblp:authoredBy/dblp:publishedIn ?venue .
      ?person_dblp rdfs:label ?person_name .
      FILTER REGEX(?venue, "SIGIR|CIKM|ECIR")
      SERVICE <https://qlever.cs.uni-freiburg.de/api/wikidata> {
        SELECT ?person_wikidata_id ?affiliation ?coordinates {
          ?person_wikidata_id wdt:P2456 ?person_dblp_id .
          ?person_wikidata_id wdt:P108 ?affiliation_id .
          ?affiliation_id @en@rdfs:label ?affiliation .
          ?affiliation_id wdt:P625 ?coordinates
        }
      }
    }
    GROUP BY ?affiliation ?coordinates
    HAVING (?count > 10)
    ORDER BY DESC(?count)
  url: https://www.wikidata.org/wiki/Wikidata:SPARQL_query_service/queries/examples
  title: Affiliations by conference (using SERVICE)
  description: ''
- name: ' For orkg author get dblp id over orcid'
  namespace: federated-queries
  domain: bitplan.com
  query_id: for-orkg-author-get-dblp-id-over-orcid--federated-queries@bitplan.com
  sparql: "# For orkg author get dblp id over orcid\nSELECT ?authorLabel ?orcid ?qid\n\
    WHERE {\n  SERVICE <https://orkg.org/triplestore>{\n  orkgr:R599385 rdfs:label\
    \ ?authorLabel.\n  orkgr:R599385 orkgp:HAS_ORCID ?orcid.\n  SERVICE <https://sparql.dblp.org/sparql>{\n\
    \      ?dblpAuthor datacite:hasIdentifier [\n\t\tdatacite:usesIdentifierScheme\
    \ datacite:orcid ;\n\t\tlitre:hasLiteralValue ?orcid ;\n        a datacite:PersonalIdentifier\n\
    \t  ].\n    ?dblpAuthor dblp:wikidata ?qid.\n  }\n  }\n}"
  url: https://www.wikidata.org/wiki/Wikidata:SPARQL_query_service/queries/examples
  title: ' For orkg author get dblp id over orcid'
  description: ''
